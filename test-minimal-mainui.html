<!DOCTYPE html>
<html>
<head>
    <title>Minimal MainUI Test</title>
    <style>
        body {
            margin: 0;
            background: #0a0a0f;
            color: white;
            font-family: monospace;
        }
        
        .main-ui-container {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 320px;
            height: auto;
            background: rgba(10, 10, 15, 0.95);
            border: 1px solid rgba(78, 205, 196, 0.5);
            border-radius: 8px;
            padding: 20px;
            z-index: 100;
        }
        
        .panel {
            background: rgba(20, 20, 25, 0.8);
            border: 1px solid rgba(100, 100, 120, 0.3);
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .debug-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(255, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 999999;
            max-width: 300px;
        }
    </style>
</head>
<body>
    <div class="debug-info" id="debug-info">
        Loading...
    </div>

    <div class="main-ui-container" id="test-container" style="background: red !important;">
        <div class="panel">
            <h3>TEST MAINUI PANEL</h3>
            <p>This should be visible!</p>
            <button onclick="alert('MainUI is working!')">Test Button</button>
        </div>
    </div>

    <script type="module">
        // Test if we can create MainUI programmatically
        function testMainUICreation() {
            const debug = document.getElementById('debug-info');
            debug.innerHTML = 'Testing MainUI creation...<br>';
            
            try {
                // Test 1: Check if container is visible
                const testContainer = document.getElementById('test-container');
                const rect = testContainer.getBoundingClientRect();
                debug.innerHTML += `Test container visible: ${rect.width > 0 && rect.height > 0}<br>`;
                debug.innerHTML += `Test container dimensions: ${rect.width}x${rect.height}<br>`;
                
                // Test 2: Create a simple MainUI-like container
                const simpleContainer = document.createElement('div');
                simpleContainer.className = 'main-ui-container';
                simpleContainer.style.cssText = `
                    position: fixed;
                    top: 100px;
                    right: 10px;
                    width: 300px;
                    height: 200px;
                    background: blue !important;
                    border: 3px solid yellow !important;
                    z-index: 999999;
                    color: white;
                    padding: 20px;
                `;
                simpleContainer.innerHTML = `
                    <h3>PROGRAMMATIC MAINUI</h3>
                    <p>Created with JavaScript</p>
                    <p>Should be blue with yellow border</p>
                `;
                document.body.appendChild(simpleContainer);
                
                debug.innerHTML += 'Simple container created<br>';
                
                // Test 3: Try to import the real MainUI class
                import('./src/ui/MainUI.js').then(module => {
                    debug.innerHTML += 'MainUI module imported successfully<br>';
                    
                    // Try to create a minimal particle system mock
                    const mockParticleSystem = {
                        particlesPerSpecies: 100,
                        numSpecies: 4,
                        forceFactor: 1.0,
                        friction: 0.95,
                        socialRadius: [[50]],
                        breathEnabled: false,
                        breathMin: 0,
                        breathMax: 5,
                        breathTime: 3,
                        species: [
                            { color: {r: 255, g: 0, b: 0}, name: 'Red' },
                            { color: {r: 0, g: 255, b: 0}, name: 'Green' },
                            { color: {r: 0, g: 0, b: 255}, name: 'Blue' },
                            { color: {r: 255, g: 255, b: 0}, name: 'Yellow' }
                        ]
                    };
                    
                    const mockPresetManager = {
                        getPresets: () => [],
                        getPreset: () => null,
                        savePreset: () => {}
                    };
                    
                    try {
                        const mainUI = new module.MainUI(mockParticleSystem, mockPresetManager);
                        debug.innerHTML += 'MainUI instance created<br>';
                        
                        if (mainUI.container) {
                            debug.innerHTML += 'MainUI container exists<br>';
                            debug.innerHTML += `Container parent: ${mainUI.container.parentNode ? 'attached' : 'not attached'}<br>`;
                            
                            // Force visible styles
                            mainUI.container.style.cssText = `
                                position: fixed !important;
                                top: 350px !important;
                                right: 10px !important;
                                width: 300px !important;
                                height: auto !important;
                                background: green !important;
                                border: 3px solid orange !important;
                                z-index: 999999 !important;
                                color: white !important;
                                padding: 20px !important;
                                display: block !important;
                                visibility: visible !important;
                                opacity: 1 !important;
                            `;
                            
                            debug.innerHTML += 'MainUI forced visible<br>';
                        } else {
                            debug.innerHTML += 'ERROR: MainUI container is null<br>';
                        }
                    } catch (error) {
                        debug.innerHTML += `ERROR creating MainUI: ${error.message}<br>`;
                        console.error('MainUI creation error:', error);
                    }
                }).catch(error => {
                    debug.innerHTML += `ERROR importing MainUI: ${error.message}<br>`;
                    console.error('MainUI import error:', error);
                });
                
            } catch (error) {
                debug.innerHTML += `ERROR in test: ${error.message}<br>`;
                console.error('Test error:', error);
            }
        }
        
        // Run test after page loads
        setTimeout(testMainUICreation, 1000);
    </script>
</body>
</html>